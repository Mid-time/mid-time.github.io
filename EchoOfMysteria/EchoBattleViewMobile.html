<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>战斗轮视图 - 移动端</title>
    <link rel="stylesheet" href="EchoBattleView/common.css">
    <link rel="stylesheet" href="EchoBattleView/mobile.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="round-header">
                <h1>第</h1>
                <input type="number" class="round-input" id="round-input" value="1" min="1">
                <h1>轮</h1>
            </div>
            <p class="description">powered by Mid</p>
        </header>
        
        <!-- 战斗视图 -->
        <div class="view-container battle-view active" id="battle-view">
            <div id="battle-characters">
                <!-- 战斗角色将在这里显示 -->
            </div>
        </div>
        
        <!-- 队伍视图 -->
        <div class="view-container team-view" id="team-view">
            <div id="team-groups">
                <!-- 队伍和角色将在这里显示 -->
            </div>
            <div class="dashed-box" id="new-team-box">+ 新建队伍</div>
        </div>
        
        <!-- 骰池视图 -->
        <div class="view-container" id="dice-view">
            <div class="dice-pool-section">
                <h3 class="dice-pool-title">骰子池</h3>
                <div id="dice-pools">
                    <!-- 骰池将在这里显示 -->
                </div>
                <div class="dashed-box" id="new-dice-pool-box">+ 新建骰池</div>
            </div>
        </div>
    </div>
    
    <!-- 底部导航栏 -->
    <div class="bottom-nav">
        <button class="nav-btn active" data-view="battle-view">
            <span>⚔️</span>
            <span class="nav-label">战斗</span>
        </button>
        <button class="nav-btn" data-view="team-view">
            <span>👥</span>
            <span class="nav-label">队伍</span>
        </button>
        <button class="nav-btn" data-view="dice-view">
            <span>🎲</span>
            <span class="nav-label">骰池</span>
        </button>
        <button class="nav-btn" id="clear-all-btn">
            <span>🗑️</span>
            <span class="nav-label">清除</span>
        </button>
    </div>
    
    <!-- 操作栏 -->
    <div class="action-bar" id="action-bar">
        <button class="action-btn" id="edit-character-btn">编辑</button>
        <button class="action-btn" id="move-character-btn">移动</button>
        <button class="action-btn danger" id="delete-character-btn">删除</button>
        <button class="action-btn secondary" id="cancel-action-btn">取消</button>
    </div>
    
    <!-- 新建/编辑角色模态框 -->
    <div class="modal" id="character-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="character-modal-title">新建角色</div>
                <button class="close-modal">&times;</button>
            </div>
            <form id="character-form">
                <input type="hidden" id="character-id">
                <input type="hidden" id="character-team-id" value="team1">
                <div class="form-group">
                    <label for="character-name">角色名称</label>
                    <input type="text" id="character-name" placeholder="实体">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="character-speed">速度</label>
                        <input type="number" id="character-speed" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="character-reason">理智</label>
                        <input type="number" id="character-reason" value="0">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="character-stamina">耐久</label>
                        <input type="number" id="character-stamina" min="0" value="0" class="short-input">
                    </div>
                    <div class="form-group">
                        <label for="character-hp">当前体力</label>
                        <input type="number" id="character-hp" min="0" value="0" class="short-input">
                    </div>
                    <div class="form-group">
                        <label for="character-hp-max">体力上限</label>
                        <input type="number" id="character-hp-max" min="0" value="0" class="short-input">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="character-mp">当前魔力</label>
                        <input type="number" id="character-mp" min="0" value="0" class="short-input">
                    </div>
                    <div class="form-group">
                        <label for="character-mp-max">魔力上限</label>
                        <input type="number" id="character-mp-max" min="0" value="0" class="short-input">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="character-sanity">当前清醒</label>
                        <input type="number" id="character-sanity" min="0" value="0" class="short-input">
                    </div>
                    <div class="form-group">
                        <label for="character-sanity-max">清醒上限</label>
                        <input type="number" id="character-sanity-max" min="0" value="0" class="short-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="character-effect">状态效果</label>
                    <input type="text" id="character-effect" placeholder="例如: 中毒, 流血, 强化">
                </div>
                
                <div class="form-group">
                    <label for="character-description">其他描述</label>
                    <textarea id="character-description" rows="3"></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="cancel-btn">取消</button>
                    <button type="submit">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 新建/编辑队伍模态框 -->
    <div class="modal" id="team-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="team-modal-title">新建队伍</div>
                <button class="close-modal">&times;</button>
            </div>
            <form id="team-form">
                <input type="hidden" id="team-id">
                <div class="form-group">
                    <label for="team-name">队伍名称</label>
                    <input type="text" id="team-name" placeholder="队伍3">
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="cancel-btn">取消</button>
                    <button type="submit">保存</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 批量移动队伍选择模态框 -->
    <div class="modal" id="batch-move-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">选择目标队伍</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label for="target-team-select">目标队伍</label>
                <select id="target-team-select" class="batch-move-select">
                    <!-- 选项将通过JavaScript动态添加 -->
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="cancel-btn">取消</button>
                <button type="button" id="confirm-batch-move-btn">确认移动</button>
            </div>
        </div>
    </div>

    <script src="EchoBattleView/common.js"></script>
    <script src="EchoBattleView/mobile.js"></script>
</body>
</html>